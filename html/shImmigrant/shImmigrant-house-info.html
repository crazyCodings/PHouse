<!doctype html>
<html class="mui-fullscreen">

	<head>
		<meta charset="UTF-8">
		<title>房屋信息</title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<link href="../../css/mui.css" rel="stylesheet" />
		<link href="../../css/style.css" rel="stylesheet" />
		<link type="text/css" rel="stylesheet" href="../../css/jsgrid/jsgrid.css" />
		<link type="text/css" rel="stylesheet" href="../../css/jsgrid/theme.css" />
		<style type="text/css">
			
			/*body header input*/ #back_btn, #new_btn { height: 30px;border-radius: 15px; float:left;margin: 15px 0 0 0;width: 60px; }
			.content_div{width: 100%;height: 200px;overflow:scroll;background-color: #1ea3de;margin: 0;margin-bottom:0px;border-radius:10px;}

			.client-photo { float: left; margin: 0 20px 0 10px; }
	        .client-photo img { border-radius: 50%; border: 1px solid #ddd; }
	        .client-info { margin-top: 10px; }
	        .client-info p { line-height: 25px; }
	        .client-btn { float: left; margin: 0 20px 0 10px; }
	        .client-btn input { width:200px !important;margin: 0 20px 0 20px; }
		</style>
	</head>

	<body>
		<header class="mui-bar mui-bar-nav navigate_div">
			<h1 class="mui-title" style="font-size: large">
				<span style="float: left;width: 120px;margin-left: 0px;text-align: left;">房主：<span>张银宝</span></span>
				<span style="float: left;margin-left: 10px;">身份证号码：<span>310111196505090035</span></span>
				<input type="button" id="back_btn" style="float: right;margin: 5px 10px 0 0;" value="返回"/>
				<input type="button" id="new_btn" style="float: right;margin: 5px 10px 0 0;" value="新增"/>
			</h1>
		</header>
		<div class="mui-content">
			<div id="jsGrid"></div>
		</div>
		<script src="../../js/mui.js"></script>
		<script src="../../js/mui.enterfocus.js"></script>
		<script src="../../js/app.js"></script>
		<script src="../../js/jquery/jquery-1.8.3.js"></script>
		<script src="../../js/jsgrid/jsgrid.min.js"></script>
		<script>
			(function($$, doc) {
				$$.init({
					statusBarBackground: '#f7f7f7'
				});
				var pageSourceId;
				$$.plusReady(function() {
					plus.screen.lockOrientation("landscape-primary");
					var shareInfo = plus.webview.currentWebview().shareInfo;
					pageSourceId = shareInfo.pageSourceId;
					document.getElementById('back_btn').addEventListener('tap',function () {
						backfunction();
					})
					document.getElementById('new_btn').addEventListener('tap',function () {
					    createNewPage();
					})
				});
				mui.back = function() {
					backfunction();
				}
				var backfunction = function() {
					var sourcePage = plus.webview.getWebviewById(pageSourceId);
					if (sourcePage) {
						mui.fire(sourcePage, 'closeMaskEvent');
					}
				}
				var newPage = null;
				var createNewPage = function () {
					var uri = "shImmigrant-new.html";
					if( newPage ){
						newPage.show("fade-in");
					} else {
						newPage = plus.webview.create(uri, uri);
						newPage.addEventListener("loaded", function() {
							newPage.show('fade-in', 300);
						}, false);
					}
				}
				$("#jsGrid").jsGrid({
	                height: "100%",
	                width: "100%",
	                autoload: true,
	                paging: false,
	                controller: {
	                    loadData: function() {
	                        var deferred = $.Deferred();
	
	                        $.ajax({
	                            url: 'http://api.randomuser.me/?results=10',
	                            dataType: 'jsonp',
	                            success: function(data){
	                                deferred.resolve(data.results);
	                            }
	                        });
	
	                        return deferred.promise();
	                    }
	                },
	                rowRenderer: function(item) {
	                    var user = item;
	                    var $photo = $("<div>").addClass("client-photo").append($("<img>").attr("src", user.picture.large));
	                    var $info = $("<div>").addClass("client-info")
	                        .append($("<p>").append($("<strong>").text(user.name.first.capitalize() + " " + user.name.last.capitalize())))
	                        .append($("<p>").text("Location: " + user.location.city.capitalize() + ", " + user.location.street))
	                        .append($("<p>").text("Email: " + user.email))
	                        .append($("<p>").text("Cell: " + user.cell));
	                    var $btn = $("<div>").addClass("client-btn")
	                    	.append($("<input>").attr("type", "button").attr("value", "Edit"))
	                    	.append($("<input>").attr("type", "button").attr("value", "Delete"))
	                    	.append($("<input>").attr("type", "button").attr("value", "Show"));
	
	                    return $("<tr>").append($("<td>").append($photo).append($info).append($btn));
	                }
	            });
	
	
	            String.prototype.capitalize = function() {
	                return this.charAt(0).toUpperCase() + this.slice(1);
	            };
			}(mui, document));
		</script>
	</body>

</html>